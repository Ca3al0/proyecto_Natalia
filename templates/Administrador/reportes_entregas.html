{% extends "common/base.html" %}

{% block navbar %}
  {% include "common/partials/navbar_admin.html" %}
  {% include "common/partials/navbar_secundario3.html" %}
{% endblock %}

{% block head %}
  {{ super() }}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .table thead {
      background-color: #2e7d32;
      color: white;
    }
    .table tbody tr:hover {
      background-color: #c8e6c9;
    }
  </style>
{% endblock %}

{% block content %}
<div class="container my-4">
  <h2 class="mb-4 text-center text-success">Reporte de Entregas Realizadas</h2>

  {% if pedidos_entregados %}
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Pedido #</th>
        <th>Cliente</th>
        <th>Fecha Entrega</th>
        <th>Productos</th>
        <th>Transportista</th>
      </tr>
    </thead>
    <tbody>
      {% for pedido in pedidos_entregados %}
      <tr>
        <td>{{ pedido.ID_Pedido }}</td>
        <td>{{ pedido.NombreComprador }}</td>
        <td>{{ pedido.FechaEntrega.strftime('%Y-%m-%d %H:%M') if pedido.FechaEntrega else 'N/A' }}</td>
        <td>
          <ul class="mb-0">
            {% for detalle in pedido.detalles_pedido %}
              <li>{{ detalle.producto.NombreProducto }} (x{{ detalle.Cantidad }})</li>
            {% endfor %}
          </ul>
        </td>
        <td>{{ pedido.TransportistaNombre or 'No asignado' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <div class="alert alert-info">No hay entregas registradas.</div>
  {% endif %}
</div>
{% endblock %}
