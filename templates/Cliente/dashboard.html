{% extends "common/base.html" %}

{% block navbar %}
  {% include "common/partials/navbar_cliente.html" %}
  {% include "common/partials/navbar_secundario2.html" %}
{% endblock %}

{% block content %}


<link rel="stylesheet" href="{{ url_for('static', filename='css/flash.css') }}">


{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }} flash-small d-flex align-items-center mt-3" role="alert">
        {% if category == 'success' %}
          <i class="bi bi-check-circle-fill me-2"></i>
        {% elif category == 'danger' %}
          <i class="bi bi-x-circle-fill me-2"></i>
        {% elif category == 'warning' %}
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {% elif category == 'info' %}
          <i class="bi bi-info-circle-fill me-2"></i>
        {% endif %}
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<!-- Carrusel principal -->
<div id="carouselEjemplo" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselEjemplo" data-bs-slide-to="0" class="active"></button>
    <button type="button" data-bs-target="#carouselEjemplo" data-bs-slide-to="1"></button>
  </div>

  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{{ url_for('static', filename='img/carruselindex1.png') }}" class="d-block w-100" alt="Muebles" />
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='img/carruselindex2.png') }}" class="d-block w-100" alt="Muebles" />
    </div>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#carouselEjemplo" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselEjemplo" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Sección Diseño con Identidad -->
<div class="container-fluid my-5">
  <div class="row text-center mb-4">
    <div class="col-12">
      <h1>DISEÑO CON IDENTIDAD</h1>
    </div>
  </div>

  <div class="row g-0">
    <div class="col-md-4">
      <img src="{{ url_for('static', filename='img/imagencarrusel1.png') }}" class="img-fluid" alt="Comedor con mesa de madera" />
    </div>
    <div class="col-md-4">
      <img src="{{ url_for('static', filename='img/imagencarrusel3.png') }}" class="img-fluid" alt="Sillas de cuero en un comedor" />
    </div>
    <div class="col-md-4">
      <img src="{{ url_for('static', filename='img/imagencarrusel5.png') }}" class="img-fluid" alt="Mesa de mármol y sillas" />
    </div>
  </div>
</div>

<!-- Sección Asesoría -->
<section class="main-section">
  <div class="content">
    <h5 class="subtitle"><b>OTRO SERVICIO</b></h5>
    <h1 class="title"><b>Asesoría en Diseño</b></h1>
  </div>
</section>

<!-- Carrusel de novedades -->
<div class="container py-5">
  <h1 class="mb-4"><b>NOVEDADES</b></h1>
  <div id="multiCardCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <div class="row">
          <div class="col-md-6 col-lg-4">
            <div class="card">
              <img src="{{ url_for('static', filename='img/salacarrusel.png') }}" class="card-img-top" alt="Sala moderna" />
            </div>
          </div>
          <div class="col-md-6 col-lg-4 d-none d-md-block">
            <div class="card">
              <img src="{{ url_for('static', filename='img/armariocarrusel.png') }}" class="card-img-top" alt="Armario moderno" />
            </div>
          </div>
          <div class="col-lg-4 d-none d-lg-block">
            <div class="card">
              <img src="{{ url_for('static', filename='img/bañocarrusel.png') }}" class="card-img-top" alt="Mueble para baño" />
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <div class="row">
          <div class="col-md-6 col-lg-4">
            <div class="card">
              <img src="{{ url_for('static', filename='img/cocinacarrusel.png') }}" class="card-img-top" alt="Cocina moderna" />
            </div>
          </div>
          <div class="col-md-6 col-lg-4 d-none d-md-block">
            <div class="card">
              <img src="{{ url_for('static', filename='img/espejocarrusel.png') }}" class="card-img-top" alt="Espejo decorativo" />
            </div>
          </div>
          <div class="col-lg-4 d-none d-lg-block">
            <div class="card">
              <img src="{{ url_for('static', filename='img/pinturacarrusel.png') }}" class="card-img-top" alt="Pintura decorativa" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#multiCardCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#multiCardCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
</div>

<!-- Sección experiencia -->
<section id="experiencia-muebles" class="py-5 bg-light">
  <div class="container">
    <div class="row align-items-center">
      <!-- Imágenes -->
      <div class="col-md-6 d-flex justify-content-center gap-3">
        <img src="{{ url_for('static', filename='img/cocina.png') }}" class="img-fluid rounded shadow" alt="Mueble moderno" style="max-width: 45%;" />
        <img src="{{ url_for('static', filename='img/espejo.png') }}" class="img-fluid rounded shadow" alt="Diseño de sala" style="max-width: 45%;" />
      </div>

      <!-- Texto -->
      <div class="col-md-6 mt-4 mt-md-0">
        <h2 class="fw-bold mb-3">Tu hogar, con el diseño que mereces</h2>
        <p>
          Con más de 10 años de experiencia en el diseño y fabricación de muebles, 
          ofrecemos piezas únicas que combinan estilo, comodidad y durabilidad.  
          Cada producto está pensado para transformar tus espacios y hacerlos más acogedores.
        </p>
        <ul class="list-unstyled mt-3 text-success">
          <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i> Diseños exclusivos y personalizados.</li>
          <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i> Materiales de alta calidad.</li>
          <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i> Innovación en cada detalle.</li>
          <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i> Asesoría integral para tu proyecto.</li>
        </ul>
      </div>
    </div>
  </div>
</section>

{% if mostrar_bienvenida %}
<style>
  /* Fondo borroso cuando el modal está abierto */
  body.modal-open::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(5px); /* borroso */
    z-index: 1040; /* por debajo del modal */
  }
</style>

<div class="modal fade" id="modalBienvenida" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md"> <!-- tamaño mediano -->
    <div class="modal-content text-white position-relative overflow-hidden" style="background-color: #9bd1a5;">

      <canvas id="confettiCanvas" class="position-absolute top-0 start-0 w-100 h-100"></canvas>

      <div class="d-flex flex-column justify-content-center align-items-center text-center p-4 position-relative" style="z-index: 2;">
        <h1 id="bienvenidaTexto" class="display-4 fw-bold mb-3"></h1>
        <p class="fs-5 mb-4">¡Estamos felices de verte por aquí!</p>
        <button type="button" class="btn btn-light btn-lg fw-bold" data-bs-dismiss="modal">¡Continuar!</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const modalEl = document.getElementById('modalBienvenida');
  const modal = new bootstrap.Modal(modalEl);
  modal.show();

  // Confeti
  const canvas = document.getElementById('confettiCanvas');
  const myConfetti = confetti.create(canvas, { resize: true, useWorker: true });
  const confettiInterval = setInterval(() => {
    myConfetti({
      particleCount: 6,
      spread: 60,
      origin: { y: 0 },
      colors: ['#ffffff', '#ffe066', '#57a773', '#9bd1a5']
    });
  }, 250);

  modalEl.addEventListener('hidden.bs.modal', () => {
    clearInterval(confettiInterval);
  });

  // Efecto máquina de escribir
  const text = "¡Bienvenido, {{ nombre_completo }}!";
  const container = document.getElementById('bienvenidaTexto');
  let i = 0;
  function escribir() {
      if (i < text.length) {
          container.textContent += text.charAt(i);
          i++;
          setTimeout(escribir, 100);
      }
  }
  escribir();
});
</script>
{% endif %}







<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/actualizacion.js') }}"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

{% endblock %}
