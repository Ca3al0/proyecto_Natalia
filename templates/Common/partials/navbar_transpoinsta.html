{% block navbar %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<style>
.search-input {
  border: 2px solid #9bd1a5 !important;
  background-color: white;
  text-align: center;
  color: #157145;
  transition: all 0.3s ease;
}

.search-input:focus,
.search-input:hover {
  outline: none;
  border-color: #57a773 !important;
  box-shadow: 0 0 8px rgba(87, 167, 115, 0.5);
}

.search-icon {
  color: #57a773;
  pointer-events: none;
}
</style>

<nav class="navbar navbar-expand-lg fixed-top bg-white shadow-sm py-3" style="z-index:1050;">
  <div class="container position-relative d-flex justify-content-center align-items-center">

    <!-- Logo -->
    <a class="navbar-brand fw-bold text-success position-absolute start-0" href="{{ url_for('admin.dashboard') }}">
      Panel Transportista - Instalador
    </a>

    <!-- Buscador centrado -->
    <div class="position-relative w-50">
      <input type="text" class="form-control form-control-lg rounded-pill ps-5 search-input"
             placeholder="¿Qué estás buscando?">
      <i class="bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 fs-5 search-icon"></i>
    </div>

    <!-- Icono de usuario a la derecha -->
    <div class="position-absolute end-0">
      <div class="nav-item dropdown">
        <a class="nav-link dropdown-toggle fs-4" href="#" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person" style="color: #57a773;"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow">
          {% if current_user.is_authenticated %}
          <li class="px-3 py-2 d-flex align-items-center">
            <div class="rounded-circle bg-light border text-dark fw-bold d-flex align-items-center justify-content-center me-2"
              style="width: 45px; height: 45px; font-size: 16px;">
              {{ current_user.Nombre[0]|upper }}{{ current_user.Apellido[0]|upper }}
            </div>
            <strong class="text-uppercase">{{ current_user.Nombre }} {{ current_user.Apellido }}</strong>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{{ url_for('transportista.actualizacion_datos') }}">Perfil</a></li>
          <li><a class="dropdown-item" href="{{ url_for('transportista.calendario') }}">Calendario</a></li>
          <li><hr class="dropdown-divider"></li>
          <li class="px-3">
            <a href="{{ url_for('auth.logout') }}" class="btn btn-success w-100">Cerrar sesión</a>
          </li>
          {% else %}
          <li><a class="dropdown-item" href="{{ url_for('auth.login') }}">Iniciar sesión</a></li>
          {% endif %}
        </ul>
      </div>
    </div>

  </div>
</nav>
{% endblock %}
